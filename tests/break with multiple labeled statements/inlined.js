function(foo){try{let _exit=false,_outerInterrupt=false;const _temp3=function(){function _temp2(){if(_outerInterrupt)return;_exit=true;return false;}const _temp=Promise.resolve(foo()).then(function(_foo){if(_foo){_outerInterrupt=true;}});return _temp&&_temp.then?_temp.then(_temp2):_temp2(_temp);}();return Promise.resolve(_temp3&&_temp3.then?_temp3.then(function(_result){return _exit?_result:true;}):_exit?_temp3:true);}catch(e){return Promise.reject(e);}}