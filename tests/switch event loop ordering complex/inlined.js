const test=function(v){try{let _interrupt=false;let messages=[];const _temp=_switch(v,[[function(){return'case1';},function(){messages.push('case1Start');return Promise.resolve(wait(messages)).then(function(){messages.push('case1Stop');_interrupt=true;});}],[function(){return'case2';},function(){messages.push('case2Start');return Promise.resolve(wait(messages)).then(function(){messages.push('case2Stop');});},function(){}],[function(){return'case3';},function(){messages.push('case3Start');return Promise.resolve(wait(messages)).then(function(){messages.push('case3Stop');_interrupt=true;});}]]);return Promise.resolve(_temp&&_temp.then?_temp.then(function(){return messages;}):messages);}catch(e){return Promise.reject(e);}};return Promise.all([test('case1'),test('case2'),test('case3')]);function wait(messages){messages.push('waitStart');return new Promise((resolve,reject)=>setTimeout(resolve,0)).then(()=>{messages.push('waitStop');});}